<div class="row">

    <div class="col-md-12 m-t-20 text-right sm-text-center">
        <a ui-sref="dashboard.broadcast.create" class="btn sm-m-b-5 btn-primary">Create new Broadcast</a>
    </div>

    <div class="col-md-12 ">
        <h4 class="col-md-12 semi-bold m-t-20 m-b-10">Active Broadcasts</h4>
        <table class="table table-hover table-responsive">
            <thead>
            <tr>
                <th>Broadcast Name</th>
                <th>Created</th>
                <th>Target</th>
                <th style="width:30%"></th>
            </tr>
            </thead>

            <tbody>
            <tr ng-repeat="broadcast in $ctrl.broadcasts" ng-if="broadcast.status == 'pending'">
                <td class="v-align-middle">{{ broadcast.name }}</td>
                <td class="v-align-middle">{{ broadcast.created_at | timezoned:$root.page.bot_timezone:'Do MMMM YYYY, h:mm a' }}</td>
                <td class="v-align-middle"><span class="semi-bold">{{ broadcast.target_count | number }}</span>  Subscriber(s).</td>
                <td class="v-align-middle text-right">
                    <!--<button class="btn sm-m-b-5 btn-sm btn-primary btn-rounded" data-toggle="modal" data-target="#modalSendBroadcast">Send Now</button>-->
                    <button ui-sref="dashboard.broadcast.edit({broadcastId: broadcast.id})" class="btn sm-m-b-5 btn-sm btn-info btn-rounded">Edit</button>
                    <button class="btn sm-m-b-5 btn-sm btn-danger btn-rounded" data-toggle="modal" data-target="#modalDelBroadcast" ng-click="$ctrl.active = broadcast">Cancel</button>
                </td>
            </tr>
            <!--<tr ng-if="!$ctrl.broadcasts.active.length">-->
                <!--<td colspan="3" class="text-center">-->
                    <!--You have no scheduled broadcasts.-->
                <!--</td>-->
            <!--</tr>-->
            </tbody>
        </table>
    </div>


    <div class="col-md-12 ">
        <h4 class="col-md-12 semi-bold m-t-20 m-b-10">History</h4>
        <table class="table table-hover table-responsive">
            <thead>
            <tr>
                <th>Broadcast Name</th>
                <th style="width: 30%">Sent Date</th>
                <th class="text-center" style="width: 7%">Sent</th>
                <th class="text-center" style="width: 7%">Read</th>
                <th style="width: 12%">Clicks / CTR</th>
                <th style="width:10%"></th>
            </tr>
            </thead>

            <tbody>

            <tr ng-repeat="broadcast in $ctrl.broadcasts" ng-if="['running', 'completed'].indexOf(broadcast.status)!=-1">
                <td class="v-align-middle">{{ broadcast.name }}</td>
                <td class="v-align-middle p-l-10">{{ broadcast.send_at | timezoned:$root.page.bot_timezone:'Do MMMM YYYY, h:mm a'}}
                    <span ng-if="broadcast.status == 'running'" pg-tooltip data-toggle="tooltip" data-original-title="Sending...">
                        <i class="fa fa-spin fa-spinner text-success"></i>
                    </span>
                </td>
                <td class="v-align-middle text-center">{{ broadcast.stats.sent }}</td>
                <td class="v-align-middle text-center">{{ broadcast.stats.read }}</td>
                <td class="v-align-middle text-center">{{ broadcast.stats.clicks.unique }}
                    <span ng-if="broadcast.stats.clicks.unique">({{(broadcast.stats.clicks.unique / broadcast.stats.read) | percentage}})</span>
                </td>
                <td class="v-align-middle text-right">
                    <button ui-sref="dashboard.broadcast.show({broadcastId: broadcast.id})" class="btn sm-m-b-5 btn-sm btn-info btn-rounded">Details</button>
                </td>
            </tr>

            <!--<tr ng-if="!$ctrl.broadcasts.history.length">-->
                <!--<td colspan="6" class="text-center">-->
                    <!--No Broadcast History.-->
                <!--</td>-->
            <!--</tr>-->


            </tbody>
        </table>
    </div>


</div>


<!-- Send Broadcast Modal -->
<!--<div class="modal fade stick-up disable-scroll" id="modalSendBroadcast" tabindex="-1" role="dialog" aria-labelledby="modalSendBroadcast" aria-hidden="false">-->
<!--<div class="modal-dialog modal-sm">-->
<!--<div class="modal-content-wrapper">-->

<!--<div class="modal-content">-->
<!--<div class="modal-header clearfix text-left">-->
<!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-close fs-14"></i>-->
<!--</button>-->
<!--<h5>Send Broadcast</h5>-->
<!--</div>-->
<!--<div class="modal-body">-->
<!--<p class="no-margin">This message will be <span class="bold">sent now</span> to all selected subscribers?</p>-->
<!--</div>-->
<!--<div class="modal-footer">-->
<!--<button type="button" class="btn btn-primary btn-cons  pull-left inline" data-dismiss="modal">Send Now</button>-->
<!--<button type="button" class="btn btn-danger btn-cons no-margin pull-left inline" data-dismiss="modal">Cancel</button>-->
<!--</div>-->
<!--</div>-->

<!--</div>-->
<!--&lt;!&ndash; /.modal-content &ndash;&gt;-->
<!--</div>-->
<!--</div>-->
<!-- Send Broadcast Modal /.modal-dialog -->


<!-- Delete Broadcast Modal -->
<div class="modal fade stick-up disable-scroll" id="modalDelBroadcast" tabindex="-1" role="dialog" aria-labelledby="modalDelBroadcast" aria-hidden="false">
    <div class="modal-dialog  modal-sm">
        <div class="modal-content-wrapper">

            <div class="modal-content">
                <div class="modal-header clearfix text-left">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-close fs-14"></i>
                    </button>
                    <h5>Delete Broadcast</h5>
                </div>
                <div class="modal-body">
                    <p class="no-margin">Are you sure to <span class="bold text-danger">delete</span> this broadcast?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger btn-cons  pull-left inline" data-dismiss="modal" ng-click="$ctrl.delete($ctrl.active, $ctrl.broadcasts)">Delete</button>
                    <button type="button" class="btn btn-default btn-cons no-margin pull-left inline" data-dismiss="modal">Cancel</button>
                </div>
            </div>

        </div>
        <!-- /.modal-content -->
    </div>
</div>
<!-- Delete Broadcast Modal /.modal-dialog -->